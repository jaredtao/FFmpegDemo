find_package(FFMPEG QUIET)
message ("FFMPEG_LIBRARIES ${FFMPEG_LIBRARIES}")
if(NOT FFMPEG_FOUND)
    if (WIN32)
        set(FFmpegPath ${CMAKE_CURRENT_SOURCE_DIR}/FFmpeg CACHE STRING "FFmpegPath")
        set(FFMPEG_INCLUDE_DIRS ${FFmpegPath}/include CACHE STRING "FFmpegIncludePath")
        if(CMAKE_CL_64)
            set (FFMPEG_LIBRARY_DIRS ${FFmpegPath}/lib/win64)
        else()
            set (FFMPEG_LIBRARY_DIRS ${FFmpegPath}/lib/win32)
        endif()
        
        set(FFMPEG_LIBRARIES avdevice avformat avcodec avfilter avutil postproc swresample swscale CACHE STRING "")
        set(FFMPEG_INCLUDE_DIRS ${FFMPEG_INCLUDE_DIRS} CACHE STRING "")
        set(FFMPEG_LIBRARY_DIRS ${FFMPEG_LIBRARY_DIRS} CACHE STRING "")
    elseif(UNIX)
        find_package(PkgConfig)
        if (PkgConfig_FOUND) 
            set(localFFmpegInstallPath /home/jared/Dev/ffmpeg-Install/lib/pkgconfig/)
            message("use local FFmpeg path ${localFFmpegInstallPath}")
            set(ENV{PKG_CONFIG_PATH} ${localFFmpegInstallPath})
            pkg_check_modules(FFMPEG REQUIRED IMPORTED_TARGET libavcodec libavformat libavutil libavfilter)
            set(FFMPEG_LIBRARIES libavcodec libavformat libavutil libavfilter CACHE STRING "")
            set(FFMPEG_INCLUDE_DIRS ${PKG_FFMPEG_INCLUDE_DIRS} CACHE STRING "")
            set(FFMPEG_LIBRARY_DIRS ${PKG_FFMPEG_LIBRARY_DIRS} CACHE STRING "")
        endif()
    endif()    
endif()
